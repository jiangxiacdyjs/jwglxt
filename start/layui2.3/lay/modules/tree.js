/** layuiAdmin.pro-v1.0.0-beta9 LPPL License By http://www.layui.com/admin/ 已修改，支持传入iconCls键值对，值为图标类名称；如果为传入，则用系统自带的五角星星*/
;layui.define("jquery",function(e){"use strict";var a=layui.$,o=layui.hint(),i="layui-tree-enter",r=function(e){this.options=e},n={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe67a;","&#xe67b;"],leaf:"&#xe67b;"};r.prototype.init=function(e){var a=this;e.addClass("layui-box layui-tree"),a.options.skin&&e.addClass("layui-tree-skin-"+a.options.skin),a.tree(e),a.on(e)},r.prototype.tree=function(e,o){var i=this,r=i.options,t=o||r.nodes;layui.each(t,function(o,t){var l=t.children&&t.children.length>0,c=a('<ul class="'+(t.spread?"layui-show":"")+'"></ul>'),s=a(["<li "+(t.spread?'data-spread="'+t.spread+'"':"")+">",function(){return l?'<i class="layui-icon layui-tree-spread">'+(t.spread?n.arrow[1]:n.arrow[0])+"</i>":""}(),function(){return r.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===r.check?n.checkbox[0]:"radio"===r.check?n.radio[0]:"")+"</i>":""}(),function(){var e=t.iconCls?'<i class="'+t.iconCls+'"></i>':'<i class="layui-icon layui-tree-'+(l?"branch":"leaf")+'">'+(l?t.spread?n.branch[1]:n.branch[0]:n.leaf)+"</i>";return'<a href="'+(t.href||"javascript:;")+'" '+(r.target&&t.href?'target="'+r.target+'"':"")+">"+e+("<cite>"+(t.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));l&&(s.append(c),i.tree(c,t.children)),e.append(s),"function"==typeof r.click&&i.click(s,t),i.spread(s,t),r.drag&&i.drag(s,t)})},r.prototype.click=function(e,a){var o=this,i=o.options;e.children("a").on("click",function(e){layui.stope(e),i.click(a)})},r.prototype.spread=function(e,a){var o=this,i=(o.options,e.children(".layui-tree-spread")),r=e.children("ul"),t=e.children("a"),l=function(){e.data("spread")?(e.data("spread",null),r.removeClass("layui-show"),i.html(n.arrow[0]),t.find(".layui-icon").html(n.branch[0])):(e.data("spread",!0),r.addClass("layui-show"),i.html(n.arrow[1]),t.find(".layui-icon").html(n.branch[1]))};r[0]&&(i.on("click",l),t.on("dblclick",l))},r.prototype.on=function(e){var o=this,r=o.options,n="layui-tree-drag";e.find("i").on("selectstart",function(e){return!1}),r.drag&&a(document).on("mousemove",function(e){var i=o.move;if(i.from){var r=(i.to,a('<div class="layui-box '+n+'"></div>'));e.preventDefault(),a("."+n)[0]||a("body").append(r);var t=a("."+n)[0]?a("."+n):r;t.addClass("layui-show").html(i.from.elem.children("a").html()),t.css({left:e.pageX+10,top:e.pageY+10})}}).on("mouseup",function(){var e=o.move;e.from&&(e.from.elem.children("a").removeClass(i),e.to&&e.to.elem.children("a").removeClass(i),o.move={},a("."+n).remove())})},r.prototype.move={},r.prototype.drag=function(e,o){var r=this,n=(r.options,e.children("a")),t=function(){var n=a(this),t=r.move;t.from&&(t.to={item:o,elem:e},n.addClass(i))};n.on("mousedown",function(){var a=r.move;a.from={item:o,elem:e}}),n.on("mouseenter",t).on("mousemove",t).on("mouseleave",function(){var e=a(this),o=r.move;o.from&&(delete o.to,e.removeClass(i))})},e("tree",function(e){var i=new r(e=e||{}),n=a(e.elem);return n[0]?void i.init(n):o.error("layui.tree 没有找到"+e.elem+"元素")})});