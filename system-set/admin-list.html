<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="../lib/html5shiv.js"></script>
    <script type="text/javascript" src="../lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../static/h-ui/css/H-ui.min.css"/>
    <link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/H-ui.admin.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/Hui-iconfont/1.0.8/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="../static/h-ui.admin/skin/default/skin.css" id="skin"/>
    <link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/jedate/skin/jedate.css"/>
    <!--[if IE 6]>
    <script type="text/javascript" src="../lib/DD_belatedPNG_0.0.8a-min.js"></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>管理员列表</title>
</head>
<body>
<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 管理员管理 <span
        class="c-gray en">&gt;</span> 管理员列表 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px"
                                               href="javascript:location.replace(location.href);" title="刷新"><i
        class="Hui-iconfont">&#xe68f;</i></a></nav>
<div class="page-container">
    <div class="text-c">
        <span class="wstxt">开始日期：</span>
        <input type="text" class="workinput input-text" id="inpstart" style="width: 120px" readonly>
        <span class="wstxt">结束日期：</span>
        <input type="text" class="workinput input-text" id="inpend" style="width: 120px" readonly>
        <input type="text" class="input-text" style="width:250px" placeholder="输入真实姓名或权限进行搜索" id="" name="">
        <button type="submit" class="btn btn-success" name=""><i class="Hui-iconfont">&#xe665;</i> 搜用户</button>
    </div>
    <div class="cl pd-5 bg-1 bk-gray mt-20">
        <span class="l"><a href="javascript:;" onclick="datadel()" class="btn btn-danger radius"><i
                class="Hui-iconfont">&#xe6e2;</i> 批量删除</a> <a href="javascript:;"
                                                              onclick="article_view('创建用户','admin-add.html')"
                                                              class="btn btn-primary radius"><i class="Hui-iconfont">&#xe600;</i> 创建用户</a></span>
        <span class="r">共有数据：<strong>54</strong>条</span>
    </div>
    <table class="table table-border table-bordered table-bg">
        <thead>
        <tr>
            <th scope="col" colspan="11">管理员列表</th>
        </tr>
        <tr class="text-c">
            <th>
                <input type="checkbox" name="" value="">
            </th>
            <th>ID</th>
            <th>真实姓名</th>
            <th>登录名</th>
            <th>手机</th>
            <th>邮箱</th>
            <th>角色</th>
            <th>创建时间</th>
            <th>备注信息</th>
            <th>状态（点击可切换）</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr class="text-c">
            <td>
                <input type="checkbox" value="1" name="subChk">
            </td>
            <td>1</td>
            <td>张海</td>
            <td>admin</td>
            <td>13000000000</td>
            <td>370234987@qq.com</td>
            <td>超级管理员</td>
            <td>2014-6-11 11:11:42</td>
            <td></td>
            <td style="cursor: pointer;" class="td-status" onClick="admin_toggle(this,'10001')">
                <span class="label label-success radius">已启用</span>
            </td>
            <td class="td-manage">
                <a style="text-decoration:none" onclick="article_view('分配角色','allocation-role.html','100%','100%')"
                   href="javascript:;" title="分配角色">分配角色</a>
                <a title="编辑" href="javascript:;" onclick="admin_edit('管理员编辑','admin-edit.html','1','800','500')"
                   class="ml-5" style="text-decoration:none">编辑</a>
                <a title="删除" href="javascript:;" onclick="admin_del(this,'1')" class="ml-5"
                   style="text-decoration:none"><i class="Hui-iconfont">删除</i></a>
            </td>
        </tr>
        <tr class="text-c">
            <td>
                <input type="checkbox" value="1" name="subChk">
            </td>
            <td>2</td>
            <td>李杰</td>
            <td>teacher</td>
            <td>13000000000</td>
            <td>370234987@qq.com</td>
            <td>超级管理员</td>
            <td>2014-6-11 11:11:42</td>
            <td></td>
            <td style="cursor: pointer;" class="td-status" onClick="admin_toggle(this,'10001')">
                <span class="label label-danger radius">已停用</span>
            </td>
            <td class="td-manage">
                <a style="text-decoration:none" onclick="article_view('分配角色','allocation-role.html','100%','100%')"
                   href="javascript:;" title="分配角色">分配角色</a>
                <a title="编辑" href="javascript:;" onclick="admin_edit('管理员编辑','admin-edit.html','1','800','500')"
                   class="ml-5" style="text-decoration:none">编辑</a>
                <a title="删除" href="javascript:;" onclick="admin_del(this,'1')" class="ml-5"
                   style="text-decoration:none"><i class="Hui-iconfont">删除</i></a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="../lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="../static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="../static/h-ui.admin/js/H-ui.admin.js"></script>
<!--/_footer 作为公共模版分离出去-->
<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="../lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="../lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="../lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript" src="../lib/jedate/jquery.jedate.min.js"></script>
<script type="text/javascript">
    var start = {
        format: 'YYYY-MM-DD',
        minDate: '2014-06-16', //设定最小日期为当前日期
        isinitVal: false,
        festival: false,
        ishmsVal: false,
        maxDate: $.nowDate({DD: 0}), //最大日期
        choosefun: function (elem, val, date) {
            end.minDate = date; //开始日选好后，重置结束日的最小日期
            endDates();
        }
    };
    var end = {
        format: 'YYYY-MM-DD',
        minDate: '', //设定最小日期为当前日期
        festival: false,
        maxDate: $.nowDate({DD: 0}), //最大日期
        choosefun: function (elem, val, date) {
            start.maxDate = date; //将结束日的初始值设定为开始日的最大日期
        }
    };
    //这里是日期联动的关键
    function endDates() {
        //将结束日期的事件改成 false 即可
        end.trigger = false;
        $("#inpend").jeDate(end);
    }
    $('#inpstart').jeDate(start);
    $('#inpend').jeDate(end);

    /*批量删除 */
    function datadel() {
        var checkedNum = $("input[name='subChk']:checked").length;
        if (checkedNum == 0) {
            layer.alert('请先选择再操作')
            return;
        } else {
            layer.confirm('请确认是否删除所选项？', {
                btn: ['确认', '取消'] //按钮
            }, function (index) {
                layer.close(index);
                var checkedList = [];
                $("input[name='subChk']:checked").each(function () {
                    checkedList.push($(this).val());
                    $(this).parents('tr').remove();
                });
                $.ajax({
                    type: "POST",
                    url: "",
                    data: {'items': checkedList},
                    success: function (result) {
                        layer.msg('删除成功！', {icon: 1});
                        //重新渲染表格
                    }
                });
            }, function () {

            });
        }
    }
    /*分配角色*/
    function allot() {
        layer.open({
            title: '角色分配',
            type: 1,
            skin: 'layui-layer-rim', //加上边框
            area: ['', ''], //宽高
            content: '<h4 class="text-c">请点击选择分配角色</h4> <span class="select-box" style="width:80%;margin-left:10%"><select class="select" size="1" name="demo1"><option value="" selected>系统管理员</option><option value="1">普通用户</option><option value="2">临时用户</option></select></span> <h2 class="text-c"><button class="btn btn-primary radius btn-in">确认分配</button></h2> '
        });
    }
    /*分配角色*/
    function article_view(title, url, w, h) {
        var index = layer.open({
            type: 2,
            title: title,
            area: [w, h],
            content: url
        });
        layer.full(index);
    }
    /*管理员-删除*/
    function admin_del(obj, id) {
        layer.confirm('确认要删除吗？', function (index) {
            $.ajax({
                type: 'POST',
                url: '',
                dataType: 'json',
                success: function (data) {
                    $(obj).parents("tr").remove();
                    layer.msg('已删除!', {
                        icon: 1,
                        time: 1000
                    });
                },
                error: function (data) {
                    console.log(data.msg);
                },
            });
        });
    }

    /*管理员-编辑*/
    function admin_edit(title, url, id, w, h) {
        layer_show(title, url, w, h);
    }

    /* 切换启用禁用状态 */
    function admin_toggle(obj, id) {
        var txt = $(obj).find('span').text();
        if (txt == '已启用') {
            layer.confirm('确认要停用吗？', function (index) {
                $(obj).html('<span class="label label-danger radius">已停用</span>');
                layer.msg('已停用!', {
                    icon: 5,
                    time: 1000
                });
            });
        } else {
            layer.confirm('确认要启用吗？', function (index) {
                $(obj).html('<span class="label label-success radius">已启用</span>');
                layer.msg('已启用!', {
                    icon: 6,
                    time: 1000
                });
            });
        }
    }

</script>
</body>

</html>
