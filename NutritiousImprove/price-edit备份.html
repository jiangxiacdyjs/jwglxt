<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="../Public/lib/html5shiv.js"></script>
    <script type="text/javascript" src="../Public/lib/respond.min.js"></script>

    <![endif]-->
    <link href="../Public/static/h-ui/css/H-ui.min.css" rel="stylesheet" type="text/css" />
    <link href="../Public/static/h-ui.admin/css/H-ui.admin.css" rel="stylesheet" type="text/css" />
    <link href="../Public/lib/Hui-iconfont/1.0.8/iconfont.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../Public/static/h-ui.admin/skin/green/skin.css" id="skin" />
    <!--[if IE 6]>
    <script type="text/javascript" src="../Public/lib/DD_belatedPNG_0.0.8a-min.js"></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>每月食材价格编辑</title>
    <style>
        .table th,.table td{
            text-align: center;
        }
    </style>
</head>

<body>
  <div class="page-container">
  <div id="HuiTab-demo1" class="HuiTab">
      <div class="tabBar clearfix">
          <span class="current">编辑食材价格</span>
          <span>查看历史记录</span>
          <div class="r" style="font-weight: bold">当前日期：<a href="javascript:;" class="c-primary" id="date"></a></div>
      </div>
      <div class="tabCon">
        <div class="row">
            <div class="col-sm-12">
                <table class="table table-border table-bordered table-bg table-hover mt-20 table-sort0" id="table">
                    <thead>
                        <tr data-tabullet-map="id">
                            <th width="50" data-tabullet-map="_index" data-tabullet-readonly="true">编号</th>
                            <th data-tabullet-map="fType">食材类别</th>
                            <th data-tabullet-map="fName">食材名称</th>
                            <th data-tabullet-map="fPrice">食材价(元)</th>
                            <th data-tabullet-map="fDate">执行月份</th>
                            <th data-tabullet-map="mark">备注信息</th>
                            <th width="50" data-tabullet-type="edit"></th>
                            <th width="50" data-tabullet-type="delete"></th>
                        </tr>
                    </thead>
                </table>
                <p class="text-c">
                  <input class="btn btn-primary radius mt-30" type="submit" value="发布食材定价单">
                </p>
            </div>
        </div>
      </div>
      <div class="tabCon">
          <div class="mt-20">
              <table class="table table-border table-bordered table-bg table-hover table-sort1">
                  <thead>
                  <tr class="text-c">
                      <th>
                          <input type="checkbox" name="check1" value="">
                      </th>
                      <th>编号</th>
                      <th>ID</th>
                      <th>定价批次号</th>
                      <th>定价单执行年月</th>
                      <th>定价操作人</th>
                      <th>定价审核人</th>
                      <th>定价单入库日期</th>

                      <th>所处状态</th>
                      <th>操作</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr class="text-c">
                      <td>
                          <input type="checkbox" value="" name="">
                      </td>
                      <td>1</td>
                      <td>03892112</td>
                      <td>2017093853</td>
                      <td>2017-09</td>
                      <td>王明成</td>
                      <td>张明天</td>
                      <td>2017-09-06</td>
                      <td class="td-status"><span class="label label-warning radius">待审核</span></td>
                      <td class="f-14 td-manage">
                          <a style="text-decoration:none" onClick="article_shenhe(this,'10001')"
                             href="javascript:;" title="审核">审核</a>
                          <a style="text-decoration:none" class="ml-5"
                             onClick="article_view('食品原材料定价详情单','nutritious-price-detail-view.html','100%','100%')"
                             href="javascript:;" title="反馈">查看</a>
                          <a style="text-decoration:none" class="ml-5" onClick="article_del(this,'10001')"
                             href="javascript:;" title="删除">删除</a>
                      </td>
                  </tr>
                  </tbody>
              </table>
          </div>
      </div>
  </div>

  </div>
  <script type="text/javascript" src="../Public/lib/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="../Public/lib/layer/2.4/layer.js"></script>
  <script type="text/javascript" src="../Public/static/h-ui/js/jQuery.Huitab.js"></script>
  <script type="text/javascript" src="../Public/lib/jquery.tabullet/js/tabullet.js"></script>
  <script type="text/javascript" src="../Public/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="../Public/static/h-ui/js/H-ui.min.js"></script>
  <script type="text/javascript" src="../Public/static/h-ui.admin/js/H-ui.admin.js"></script>
  <script type="text/javascript" src="../Public/mySrc/js/common.js"></script>
  <script>
      /* 获取当前时间*/
      var d = new Date();
      var str = d.getFullYear() + "-" + ((d.getMonth() + 1) < 10 ? "0" : "") + (d.getMonth() + 1) + "-" + (d.getDate() < 10 ? "0" : "") + d.getDate();
      var date = $("#date");
      date.html(str);
      // tab
      $("#HuiTab-demo1").Huitab({ index:0 });

      /*表格dataTable*/
      tableSort('.table-sort1', [0, 8, 9]);

      $(function() {
          var source = [{
              id: 1,
              fType:'蔬菜类',
              fName:'茄子',
              fPrice: "3.85",
              fDate: "2017-09",
              mark: "拟定初价",
          }, {
              id: 2,
              fType:'蔬菜类',
              fName:'花菜',
              fPrice: "2.36",
              fDate: "2017-09",
              mark: "拟定初价"
          } ];

          function resetTabullet() {
              $("#table").tabullet({
                  data: source,
                  action: function(mode, data) {
                      // console.dir(data);
                      if (mode === 'save') {
                          source.push(data);

                      }
                      if (mode === 'edit') {
                          /*for (var i = 0; i < source.length; i++) {
                              if (source[i].id == data.id) {
                                  source[i] = data;
                              }
                          }*/
                          source[data.id - 1] = data;

                      }
                      if (mode == 'delete') {
                          for (var i = 0; i < source.length; i++) {
                              if (source[i].id == data) {
                                  source.splice(i, 1);
                                  break;
                              }
                          }

                      }
                      resetTabullet();
                  }
              });
          }

          resetTabullet();
      });

    /*食谱预览*/
      function article_view(title, url, w, h) {
          var index = layer.open({
              type: 2,
              title: title,
              area: [w, h],
              content: url
          });
          layer.full(index);
      }
  </script>
</body>

</html>
