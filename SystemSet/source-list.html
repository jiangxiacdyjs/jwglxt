<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="../Public/lib/html5shiv.js"></script>
    <script type="text/javascript" src="../Public/lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../Public/static/h-ui/css/H-ui.min.css"/>
    <link rel="stylesheet" type="text/css" href="../Public/static/h-ui.admin/css/H-ui.admin.css"/>
    <link rel="stylesheet" type="text/css" href="../Public/lib/Hui-iconfont/1.0.8/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="../Public/static/h-ui.admin/skin/green/skin.css" id="skin" />
    <link rel="stylesheet" type="text/css" href="../Public/static/h-ui.admin/css/style.css"/>
    <!--[if IE 6]>
    <script type="text/javascript" src="../Public/lib/DD_belatedPNG_0.0.8a-min.js"></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <style>
        .abs {
            position: absolute;
        }

        .rel {
            position: relative;
        }

        .plus {
            left: 130px;
            top: -4px;
        }
    </style>
    <title>资源管理</title>
</head>

<body>
<!-- 位置 -->
<nav class="breadcrumb">
    <i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 学生营养餐 <span
        class="c-gray en">&gt;</span> 学校片区管理
    <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px"
       href="javascript:location.replace(location.href);" title="刷新"><i class="Hui-iconfont">&#xe68f;</i></a>
</nav>
<div class="page-container">
    <div id="HuiTab-demo1" class="HuiTab">
        <div class="tabBar clearfix">
            <span class="current">资源列表</span>
            <span>操作列表</span>
        </div>

        <!-- 系统设置 -->
        <div class="tabCon">
            <div class="cl pd-5 bg-1 bk-gray mt-20">
                <a href="javascript:;" onclick="datadel()" class="btn btn-danger radius">
                    <i class="Hui-iconfont">&#xe6a6;</i> 删除资源
                </a>
                <a class="btn btn-primary radius" href="javascript:;"
                   onclick="source_add('新增资源','source-add.html','800','500')">
                    <i class="Hui-iconfont">&#xe600;</i> 新增资源
                </a>
                <span class="r">共有数据：<strong>8</strong> 条</span>
            </div>
            <div class="mt-20 rel">
                <table class="table table-border table-bordered table-bg table-hover table-sort0">
                    <thead>
                    <tr class="text-c">
                        <th>
                            <input type="checkbox" name="check0" value="">
                        </th>
                        <th>编号</th>
                        <th>资源名称</th>
                        <th>资源描述</th>
                        <th>备注信息</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="text-c">
                        <td>
                            <input type="checkbox" value="" name="subChk">
                        </td>
                        <td>1</td>
                        <td>用户管理</td>
                        <td>对系统所有用户进行"增删改"操作</td>
                        <td></td>
                        <td class="f-14">
                            <a title="编辑" href="javascript:;" onclick="source_add('编辑资源','source-add.html','800','500')"
                               style="text-decoration:none">
                                <i class="Hui-iconfont">&#xe6df;</i></a>
                            <a title="删除" href="javascript:;" onclick="source_del(this,'1')" class="ml-5"
                               style="text-decoration:none"><i class="Hui-iconfont">&#xe6e2;</i></a>
                        </td>
                    </tr>
                    <tr class="text-c">
                        <td>
                            <input type="checkbox" value="" name="subChk">
                        </td>
                        <td>2</td>
                        <td>资源管理</td>
                        <td>对系统所有资源"增删改"操作</td>
                        <td></td>
                        <td class="f-14">
                            <a title="编辑" href="javascript:;" onclick="source_add('编辑资源','source-add.html','800','500')"
                               style="text-decoration:none">
                                <i class="Hui-iconfont">&#xe6df;</i></a>
                            <a title="删除" href="javascript:;" onclick="source_del(this,'1')" class="ml-5"
                               style="text-decoration:none"><i class="Hui-iconfont">&#xe6e2;</i></a>
                        </td>
                    </tr>
                    <tr class="text-c">
                        <td>
                            <input type="checkbox" value="" name="subChk">
                        </td>
                        <td>1</td>
                        <td>角色管理</td>
                        <td>对系统所有角色进行"增删改"操作</td>
                        <td></td>
                        <td class="f-14">
                            <a title="编辑" href="javascript:;" onclick="source_add('编辑资源','source-add.html','800','500')"
                               style="text-decoration:none">
                                <i class="Hui-iconfont">&#xe6df;</i></a>
                            <a title="删除" href="javascript:;" onclick="source_del(this,'1')" class="ml-5"
                               style="text-decoration:none"><i class="Hui-iconfont">&#xe6e2;</i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- 操作列表 -->
        <div class="tabCon">
            <div class="cl pd-5 bg-1 bk-gray mt-20">
                <a href="javascript:;" onclick="datadel()" class="btn btn-danger radius">
                    <i class="Hui-iconfont">&#xe6a6;</i> 删除资源
                </a>
                <a class="btn btn-primary radius" href="javascript:;"
                   onclick="source_add('新增资源','source-add.html','800','500')">
                    <i class="Hui-iconfont">&#xe600;</i> 新增资源
                </a>
                <span class="r">共有数据：<strong>8</strong> 条</span>
            </div>
            <div class="mt-20 rel">
                <table class="table table-border table-bordered table-bg table-hover table-sort1">
                    <thead>
                    <tr class="text-c">
                        <th>编号</th>
                        <th>操作控制名称</th>
                        <th>操作描述</th>
                        <th>排序权值</th>
                        <th>状态</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="text-c">
                        <td>1</td>
                        <td><span style="cursor:pointer" class="text-primary"
                                  onClick="school_show('紫云二小','../school-show.html','','300')" title="查看">紫云一小</span>
                        </td>
                        <td>1510</td>
                        <td>68</td>

                        <td class="f-14 td-manage">
                            <a class="btn btn-success" onClick="article_view('学校片区管理','../nutritious-meal/allot-school.html','100%','100%')"
                               href="javascript:;" title="片区管理">片区管理</a>
                            <a class="btn btn-primary" onClick="relevance()" href="javascript:;"
                               title="关联配送公司">关联配送公司</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="../Public/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../Public/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="../Public/static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="../Public/static/h-ui/js/jQuery.Huitab.js"></script>
<script type="text/javascript" src="../Public/static/h-ui.admin/js/H-ui.admin.js"></script>
<!--/_footer 作为公共模版分离出去-->
<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="../Public/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="../Public/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="../Public/lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript">

    /*批量删除 */
    function datadel() {
        var checkedNum = $("input[name='subChk']:checked").length;
        if (checkedNum == 0) {
            layer.alert('请先选择再操作')
            return;
        } else {
            layer.confirm('请确认是否删除所选项？', {
                btn: ['确认', '取消'] //按钮
            }, function (index) {
                layer.close(index);
                var checkedList = [];
                $("input[name='subChk']:checked").each(function () {
                    checkedList.push($(this).val());
                    $(this).parents('tr').remove();
                });
                $.ajax({
                    type: "POST",
                    url: "",
                    data: {'items': checkedList},
                    success: function (result) {
                        layer.msg('删除成功！', {icon: 1});
                        //重新渲染表格
                    }
                });
            }, function () {

            });
        }
    }
    /*资源-添加*/
    function source_add(title, url, w, h) {
        layer_show(title, url, w, h);
    }

    /*分配角色*/
    function article_view(title, url, w, h) {
        var index = layer.open({
            type: 2,
            title: title,
            area: [w, h],
            content: url
        });
        layer.full(index);
    }

    /*资源-删除*/
    function source_del(obj, id) {
        layer.confirm('确认删除所选资源吗？', function (index) {
            $.ajax({
                type: 'POST',
                url: '',
                dataType: 'json',
                success: function (data) {
                    $(obj).parents("tr").remove();
                    layer.msg('已删除!', {icon: 1, time: 1000});
                },
                error: function (data) {
                    console.log(data.msg);
                },
            });
        });
    }

    function relevance() {
        layer.open({
            title: '关联至...',
            type: 1,
            skin: 'layui-layer-rim', //加上边框
            area: ['420px', ''], //宽高
            content: '<h4 class="text-c">请选择关联配送运输公司</h4> <span class="select-box" style="width:80%;margin-left:10%"><select class="select" size="1" name="demo1"><option value="" selected>贵州城东商贸有限公司</option><option value="1">配送商贸公司1</option><option value="2">配送商贸公司1</option></select></span> <h2 class="text-c"><button class="btn btn-primary radius btn-in">确认关联</button></h2> '
        });
    }

    $(function () {

        // 初始化tab
        $("#HuiTab-demo1").Huitab({index: 0});

        // datatables
        function tableSort(a, b) {
            $(a).dataTable({
                "aaSorting": [
                    [1, "desc"]
                ], //默认第几个排序
                "bStateSave": true, //状态保存
                "aoColumnDefs": [
                    //{"bVisible": false, "aTargets": [ 3 ]} //控制列的隐藏显示
                    {
                        "orderable": false,
                        "aTargets": [0, b]
                    } // 不参与排序的列
                ]
            });
        }

        tableSort('.table-sort0', 5)
        tableSort('.table-sort1', 5)
        tableSort('.table-sort2', 5)
    })

</script>
</body>

</html>
