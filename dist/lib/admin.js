/** layuiAdmin.pro-v1.0.0-beta9 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(["view","viewer"],function(e){var a=layui.jquery,t=layui.laytpl,i=layui.element,n=layui.setter,l=layui.view,o=layui.viewer,s=layui.device(),r=a(window),d=a("body"),u=a("#"+n.container),c="layui-show",m="layui-this",y="layui-disabled",f="#LAY_app_body",h="LAY_app_flexible",p="layadmin-side-spread-sm",v="layadmin-tabsbody-item",b="layui-icon-shrink-right",g="layui-icon-spread-left",x="layadmin-side-shrink",C="LAY-system-side-menu",w={v:"2.0",setter:n,baseUrl:n.baseUrl,req:l.req,sendAuthCode:function(e){e=a.extend({seconds:60,elemPhone:"#LAY_phone",elemVercode:"#LAY_vercode"},e);var t,i=e.seconds,n=function(l){var o=a(e.elem);i--,i<0?(o.removeClass(y).html("获取验证码"),i=e.seconds,clearInterval(t)):o.addClass(y).html(i+"秒后重获"),l||(t=setInterval(function(){n(!0)},1e3))};d.on("click",e.elem,function(){e.elemPhone=a(e.elemPhone),e.elemVercode=a(e.elemVercode);var t=e.elemPhone,l=t.val();if(i===e.seconds&&!a(this).hasClass(y)){if(!/^1\d{10}$/.test(l))return t.focus(),layer.msg("请输入正确的手机号");if("object"==typeof e.ajax){var o=e.ajax.success;delete e.ajax.success}w.req(a.extend(!0,{url:"/auth/code",type:"get",data:{phone:l},success:function(a){layer.msg("验证码已发送至你的手机，请注意查收",{icon:1,shade:0}),e.elemVercode.focus(),n(),o&&o(a)}},e.ajax))}})},screen:function(){var e=r.width();return e>=1200?3:e>=992?2:e>=768?1:0},exit:l.exit,sideFlexible:function(e){var t=u,i=a("#"+h),l=w.screen();"spread"===e?(i.removeClass(g).addClass(b),l<2?t.addClass(p):t.removeClass(p),t.removeClass(x)):(i.removeClass(b).addClass(g),l<2?t.removeClass(x):t.addClass(x),t.removeClass(p)),layui.event.call(this,n.MOD_NAME,"side({*})",{status:e})},on:function(e,a){return layui.onevent.call(this,n.MOD_NAME,e,a)},popup:l.popup,popupRight:function(e){return w.popup.index=layer.open(a.extend({type:1,id:"LAY_adminPopupR",anim:-1,title:!1,closeBtn:!1,offset:"r",shade:.1,shadeClose:!0,skin:"layui-anim layui-anim-rl layui-layer-adminRight",area:"300px"},e))},theme:function(e){var i=(n.theme,layui.data(n.tableName)),l="LAY_layadmin_theme",o=document.createElement("style"),s=t([".layui-side-menu,",".layadmin-pagetabs .layui-tab-title li:after,",".layadmin-pagetabs .layui-tab-title li.layui-this:after,",".layui-layer-admin .layui-layer-title,",".layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-item>.layui-nav-child","{background-color:{{d.color.main}} !important;}",".layui-layer-admin .layui-layer-title{background-color:{{d.color.logo || d.color.main}} !important;}",".layui-layer-admin .layui-layer-btn .layui-layer-btn0{background-color:{{d.color.logo || d.color.main}} !important;border-color:{{d.color.logo || d.color.main}} !important}",".layui-btn[lay-submit]{background-color:{{d.color.logo || d.color.main}} !important;border-color:{{d.color.logo || d.color.main}} !important}",".layui-nav-tree .layui-this,",".layui-nav-tree .layui-this>a,",".layui-nav-tree .layui-nav-child dd.layui-this,",".layui-nav-tree .layui-nav-child dd.layui-this a","{background-color:{{d.color.selected}} !important;}",".layui-layout-admin .layui-logo{background-color:{{d.color.logo || d.color.main}} !important;}}"].join("")).render(e=a.extend({},i.theme,e)),r=document.getElementById(l);"styleSheet"in o?(o.setAttribute("type","text/css"),o.styleSheet.cssText=s):o.innerHTML=s,o.id=l,r&&d[0].removeChild(r),d[0].appendChild(o),d.attr("layadmin-themealias",e.color.alias),i.theme=i.theme||{},layui.each(e,function(e,a){i.theme[e]=a}),layui.data(n.tableName,{key:"theme",value:i.theme})},tabsPage:{},tabsBody:function(e){return a(f).find("."+v).eq(e||0)},tabsBodyChange:function(e){w.tabsBody(e).addClass(c).siblings().removeClass(c),k.rollPage("auto",e)},resize:function(e){var a=layui.router(),t=a.path.join("-");r.off("resize",w.resizeFn[t]),e(),w.resizeFn[t]=e,r.on("resize",w.resizeFn[t])},resizeFn:{},runResize:function(){var e=layui.router(),a=e.path.join("-");w.resizeFn[a]&&w.resizeFn[a]()},delResize:function(){var e=layui.router(),a=e.path.join("-");r.off("resize",w.resizeFn[a]),delete w.resizeFn[a]},correctRouter:function(e){return/^\//.test(e)||(e="/"+e),e.replace(/^(\/+)/,"/").replace(new RegExp("/"+n.entry+"$"),"/")},closeThisTabs:function(){w.tabsPage.index&&a(_).eq(w.tabsPage.index).find(".layui-tab-close").trigger("click")},getRightAvailableHeight:function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return e-80},loading:function(e){e=e?""+e:"加载中，请耐心等待...";var a=(arguments[1]||10,layer.msg("<div>"+e+"</div>",{zIndex:20171016,icon:16,time:0,shade:[.3,"#000"],shadeClose:!1,skin:"layer_my_msg_load"}));return a},logOut:function(e,t){var i,n=this,l=0===e?.01:e>0?e:8,t=t?t:"您的登录凭证已过期，系统需要重新验证";layui.data(n.setter.tableName,{key:n.setter.request.tokenName,remove:!0}),w.popup({title:"请求错误！系统将在 <span>"+l+"</span> 秒后自动退出",time:1e3*l,content:'<i class="fa fa-warning red mr10"></i>'+t,success:function(e,t){var n=a(e).find(".layui-layer-title").find("span");i=setInterval(function(){n.html(Number(n.html())-1),0===Number(n.html())?clearInterval(i):""},1e3)},end:function(){clearInterval(i),i=null,w.exit()}})},setBtnState:function(e,t){var i=e instanceof a?e:a(e),n=i.text(),l=i.find(".layui-icon-loading");switch(t){case"loading":i.prop("disabled",!0),l.length?l.addClass("layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop mr10"):i.text(i.attr("data-loading")||"加载中").attr("data-normal",n).prepend(a("<i/>").addClass("layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop mr10"));break;case"normal":i.prop("disabled",!1).text(i.attr("data-normal")||"确认"),l.length?i.find(".layui-icon-loading").remove():""}},viewFile:function(e,a,t,i,n,l){if(/\.(gif|jpg|jpeg|png|ico)$/i.test(e)||!e){var s=document.getElementById(a)||document.querySelector("."+a);window[t]&&window[t].destroy&&(window[t].destroy(),window[t]=null),s?window[t]=new o(s,{url:i||"src",title:n||!1,navbar:l||!1,zIndex:19891042e5}):layer.alert("请检查传入查看器的外层容器id或class是否正确")}else window[t]&&window[t].destroy&&(window[t].destroy(),window[t]=null),window.open(e)},generateSelectOption:function(e,t,i,n){var l=a("<option/>").val(i).text(t);i===n&&l.attr("selected",!0),e.append(l)}},k=w.events={flexible:function(e){var a=e.find("#"+h),t=a.hasClass(g);w.sideFlexible(t?"spread":null)},refresh:function(){layui.index.render()},message:function(e){e.find(".layui-badge-dot").remove()},theme:function(){w.popupRight({id:"LAY_adminPopupTheme",success:function(){l(this.id).render("system/theme")}})},note:function(e){var a=w.screen()<2,t=layui.data(n.tableName).note;k.note.index=w.popup({title:"便签",shade:0,offset:["41px",a?null:e.offset().left-250+"px"],anim:-1,id:"LAY_adminNote",skin:"layadmin-note layui-anim layui-anim-upbit",content:'<textarea placeholder="内容"></textarea>',resize:!1,success:function(e,a){var i=e.find("textarea"),l=void 0===t?"便签中的内容会存储在本地，这样即便你关掉了浏览器，在下次打开时，依然会读取到上一次的记录。是个非常小巧实用的本地备忘录":t;i.val(l).focus().on("keyup",function(){layui.data(n.tableName,{key:"note",value:this.value})})}})},about:function(){w.popupRight({id:"LAY_adminPopupAbout",success:function(){l(this.id).render("system/about")}})},more:function(){w.popupRight({id:"LAY_adminPopupMore",success:function(){l(this.id).render("system/more")}})},back:function(){history.back()},setTheme:function(e){var a=n.theme,t=e.data("index");e.siblings(".layui-this").data("index");e.hasClass(m)||(e.addClass(m).siblings(".layui-this").removeClass(m),a.color[t]&&(a.color[t].index=t,w.theme({color:a.color[t]})))},rollPage:function(e,t){var i=a("#LAY_app_tabsheader"),n=i.children("li"),l=(i.prop("scrollWidth"),i.outerWidth()),o=parseFloat(i.css("left"));if("left"===e){if(!o&&o<=0)return;var s=-o-l;n.each(function(e,t){var n=a(t),l=n.position().left;if(l>=s)return i.css("left",-l),!1})}else"auto"===e?!function(){var e,s=n.eq(t);if(s[0]){if(e=s.position().left,e<-o)return i.css("left",-e);if(e+s.outerWidth()>=l-o){var r=e+s.outerWidth()-(l-o);n.each(function(e,t){var n=a(t),l=n.position().left;if(l+o>0&&l-o>r)return i.css("left",-l),!1})}}}():n.each(function(e,t){var n=a(t),s=n.position().left;if(s+n.outerWidth()>=l-o)return i.css("left",-s),!1})},leftPage:function(){k.rollPage("left")},rightPage:function(){k.rollPage()},closeThisTabs:function(){w.closeThisTabs()},closeOtherTabs:function(e){var t="LAY-system-pagetabs-remove";"all"===e?(a(_+":gt(0)").remove(),a(f).find("."+v+":gt(0)").remove()):(a(_).each(function(e,i){e&&e!=w.tabsPage.index&&(a(i).addClass(t),w.tabsBody(e).addClass(t))}),a("."+t).remove())},closeAllTabs:function(){k.closeOtherTabs("all"),location.hash=""},shade:function(){w.sideFlexible()},logout:function(){w.exit()}};!function(){var e=layui.data(n.tableName);e.theme?w.theme(e.theme):w.theme({color:{main:"#3A3D49",logo:"#2F9688",selected:"#5FB878",alias:"green",index:5}}),d.addClass("layui-layout-body"),w.screen()<1&&delete n.pageTabs,n.pageTabs||u.addClass("layadmin-tabspage-none"),s.ie&&s.ie<10&&l.error("IE"+s.ie+"下访问可能不佳，推荐使用：Chrome / Firefox / Edge 等高级浏览器",{offset:"auto",id:"LAY_errorIE"})}(),w.on("hash(side)",function(e){var t=e.path,i=function(e){return{list:e.children(".layui-nav-child"),name:e.data("name"),jump:e.data("jump")}},n=a("#"+C),l="layui-nav-itemed",o=function(e){var n=w.correctRouter(t.join("/"));e.each(function(e,o){var s=a(o),r=i(s),d=r.list.children("dd"),u=t[0]==r.name||0===e&&!t[0]||r.jump&&n==w.correctRouter(r.jump);if(d.each(function(e,o){var s=a(o),d=i(s),u=d.list.children("dd"),c=t[0]==r.name&&t[1]==d.name||d.jump&&n==w.correctRouter(d.jump);if(u.each(function(e,o){var s=a(o),u=i(s),c=t[0]==r.name&&t[1]==d.name&&t[2]==u.name||u.jump&&n==w.correctRouter(u.jump);if(c){var y=u.list[0]?l:m;return s.addClass(y).siblings().removeClass(y),!1}}),c){var y=d.list[0]?l:m;return s.addClass(y).siblings().removeClass(y),!1}}),u){var c=r.list[0]?l:m;return s.addClass(c).siblings().removeClass(c),!1}})};n.find("."+m).removeClass(m),w.screen()<2&&w.sideFlexible(),o(n.children("li"))}),i.on("nav(layadmin-system-side-menu)",function(e){e.siblings(".layui-nav-child")[0]&&u.hasClass(x)&&(w.sideFlexible("spread"),layer.close(e.data("index"))),w.tabsPage.type="nav"}),i.on("nav(layadmin-pagetabs-nav)",function(e){var a=e.parent();a.removeClass(m),a.parent().removeClass(c)});var A=function(e){var a=e.attr("lay-id"),t=e.attr("lay-attr"),i=e.index();w.tabsBodyChange(i),location.hash=a===n.entry?"/":t},_="#LAY_app_tabsheader>li";d.on("click",_,function(){var e=a(this),t=e.index();return w.tabsPage.type="tab",w.tabsPage.index=t,"iframe"===e.attr("lay-attr")?w.tabsBodyChange(t):(A(e),void w.runResize())}),i.on("tabDelete(layadmin-layout-tabs)",function(e){var t=a(_+".layui-this");e.index&&w.tabsBody(e.index).remove(),A(t),w.delResize()}),d.on("click","*[lay-href]",function(){var e=a(this),t=e.attr("lay-href");layui.router();w.tabsPage.elem=e,location.hash=w.correctRouter(t)}),d.on("click","*[layadmin-event]",function(){var e=a(this),t=e.attr("layadmin-event");k[t]&&k[t].call(this,e)}),d.on("mouseenter","*[lay-tips]",function(){var e=a(this);if(!e.parent().hasClass("layui-nav-item")||u.hasClass(x)){var t=e.attr("lay-tips"),i=e.attr("lay-offset"),n=e.attr("lay-direction"),l=layer.tips(t,this,{tips:n||1,time:-1,success:function(e,a){i&&e.css("margin-left",i+"px")}});e.data("index",l)}}).on("mouseleave","*[lay-tips]",function(){layer.close(a(this).data("index"))});var z=layui.data.resizeSystem=function(){layer.closeAll("tips"),z.lock||setTimeout(function(){w.sideFlexible(w.screen()<2?"":"spread"),delete z.lock},100),z.lock=!0};r.on("resize",layui.data.resizeSystem),e("admin",w)});