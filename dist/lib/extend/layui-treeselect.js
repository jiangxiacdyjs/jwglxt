/** layuiAdmin.pro-v1.0.0-beta9 LPPL License By http://www.layui.com/admin/ */
 ;layui.define("tree",function(e){"use strict";var t="treeselect",a={},l=layui.jquery,i=layui.hint(),n="layui-disabled",r=l(window),u=function(){this.v="1.0.0"};u.prototype.render=function(e){var t,u=e?l(e.elem):null,c="请选择",s="layui-form-select",o="layui-select-title",d="layui-select-none",f="",y=function(e){return"[object String]"===Object.prototype.toString.call(e)},v=function(e,t,a){l.each(e,function(e,l){return l.id===t?(a.val(l.name),!1):void(l.children&&v.call(this,l.children,t,a))})},h=function(e,a){l(e.target).parent().hasClass(o)&&!a||(l("."+s).removeClass(s+"ed "+s+"up"),t&&f&&t.val(f)),t=null},p=function(t,i,n){var c=t.find("."+o),f=c.find("input"),y=t.find(".layui-tree"),p=a,m=u.val();if(m&&v.call(this,p.data,m,f),!n){var k=function(){var e=t.offset().top+t.outerHeight()+5-r.scrollTop(),a=r.height()-e-13,l=y.outerHeight();a<300&&y.css("max-height",a+"px"),t.addClass(s+"ed"),e+l>r.height()&&e>=l&&t.addClass(s+"up")},g=function(){t.removeClass(s+"ed "+s+"up"),f.blur()};c.on("click",function(e){t.hasClass(s+"ed")?g():(h(e,!0),k()),y.find("."+d).remove()}),c.find(".layui-edge").on("click",function(){f.focus()}),f.on("keyup",function(e){var t=e.keyCode;9===t&&k()}).on("keydown",function(e){var t=e.keyCode;9===t?g():13===t&&e.preventDefault()}),layui.tree({elem:"#"+i,skin:e.skin,click:function(t){return u.val(t.id).removeClass("layui-form-danger"),f.val(t.name),y.find(".youyao-this").removeClass("youyao-this"),g(!0),p.selectcall&&p.selectcall(t),e.click&&e.click(t),!1},nodes:p.data}),y.find(".layui-tree-spread").on("click",function(){return!1}),l(document).off("click",h).on("click",h)}},m=function(e){var t=u.next("."+s),a=u[0].disabled,i=u.value?u.value:u.val(),r=u.attr("placeholder")?u.attr("placeholder"):c;if("string"==typeof u.attr("lay-ignore"))return u.show();u.hide(),u.addClass("layui-input-treeselect"),u.attr("data-treeid",e);var d=l(['<div class="layui-unselect '+s+(a?" layui-select-disabled":"")+'">','<div class="'+o+'"><input type="text" placeholder="'+r+'" id="'+e+'_text" value="'+(i?i:"")+'" readonly class="layui-input layui-unselect'+(a?" "+n:"")+'">','<i class="layui-edge"></i></div>','<ul id="'+e+'" class="layui-anim layui-anim-upbit layui-tree"></ul>',"</div>"].join(""));t[0]&&t.remove(),u.after(d),p.call(this,d,e,a)},k=function(e){var t=l(e?'*[lay-filter="'+e+'"]':".layui-input-treeselect");layui.each(t,function(e,t){u=l(t);var a=u.attr("data-treeid");m.call(this,a)})};if(!e)return k.call(this,null);if(e.filter)return k.call(this,e.filter);if(!u[0])return i.error("layui.treeSelect 没有找到"+e.elem+"元素");if(!e.data)return i.error("layui.treeSelect 缺少参数 data ,data 可直接指定treedata，也可以是treedata数据url，treedata参见layui tree模块");var g="selecttree_"+e.elem.replace("#","");y.call(this,e.data)?l.ajax({url:e.data,dataType:"json",type:e.method?e.method:"POST",success:function(t){e.data=t,a=e,m.call(this,g)}}):(a=e,m.call(this,g))};var c=new u;e(t,c)});