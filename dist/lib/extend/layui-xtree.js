/** layuiAdmin.pro-v1.0.0-beta9 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(function(exports){function layuiXtree(e){var t=this;t._containerid=e.elem,t._container=document.getElementById(e.elem),t._container.style.minHeight="100px",t._options=e,t.Loading(e)}layuiXtree.prototype.getByClassName=function(e){if(document.getElementsByClassName)return this._container.getElementsByClassName(e);for(var t=this._container.childNodes,i=new Array,l=0;l<t.length;l++)for(var o=t[l],a=o.getAttribute("class").split(" "),n=0;n<a.length;n++)if(a[n]==e){i.push(o);break}return i},layuiXtree.prototype.getChildByClassName=function(e,t){for(var i=e.childNodes,l=new Array,o=0;o<i.length;o++)for(var a=i[o],n=a.getAttribute("class").split(" "),r=0;r<n.length;r++)if(n[r]==t){l.push(a);break}return l},layuiXtree.prototype.Loading=function(options){var _this=this;if(_this.xloading=document.createElement("span"),_this.xloading.setAttribute("class","layui-icon layui-anim layui-anim-rotate layui-anim-loop"),_this.xloading.innerHTML="&#xe63e;",_this.xloading.style.fontSize="50px",_this.xloading.style.color="#009688",_this.xloading.style.fontWeight="bold",_this.xloading.style.marginLeft=_this._container.offsetWidth/2-25+"px",_this.xloading.style.marginTop=_this._container.offsetHeight/2-50?_this._container.offsetHeight/2-50:"100px",_this._container.innerHTML="",_this._container.appendChild(_this.xloading),"object"==typeof options.data)return _this._dataJson=options.data,void _this.Initial(options);if(window.XMLHttpRequest)var obj=new XMLHttpRequest;else var obj=new ActiveXObject("Microsoft.XMLHTTP");obj.open("post",options.data,!0),obj.onreadystatechange=function(){(4==obj.readyState&&200==obj.status||304==obj.status)&&(_this._dataJson=eval("("+obj.responseText+")"),_this.Initial(options))},options.param?obj.send(JSON.stringify(options.param)):obj.send()},layuiXtree.prototype.Initial=function(e){var t=this;t._form=e.form,t._domStr="",t._isopen=null==e.isopen||e.isopen,null==e.color&&(e.color={open:"#2F4056",close:"#2F4056",end:"#2F4056"}),t._iconOpenColor=null!=e.color.open?e.color.open:"#2F4056",t._iconCloseColor=null!=e.color.close?e.color.close:"#2F4056",t._iconEndColor=null!=e.color.end?e.color.end:"#2F4056",null==e.icon&&(e.icon={open:"&#xe625;",close:"&#xe623;",end:"&#xe621;"}),t._iconOpen=null!=e.icon.open?e.icon.open:"&#xe625;",t._iconClose=null!=e.icon.close?e.icon.close:"&#xe623;",t._iconEnd=null!=e.icon.end?e.icon.end:"&#xe621;",t._click=null!=e.click?e.click:function(){},t._ckall=null!=e.ckall&&e.ckall,t._ckallSuccess=null!=e.ckallback?e.ckallback:function(){},t.CreateCkAll(),t.dataBind(t._dataJson),t.Rendering()},layuiXtree.prototype.CreateCkAll=function(){var e=this;e._ckall&&(e._domStr+='<div class="layui-xtree-item">',e._domStr+='<input type="checkbox" class="layui-xtree-checkbox layui-xtree-ckall" title="全选" lay-skin="primary" lay-filter="xtreeckall'+e._containerid+'">',e._domStr+="</div>")},layuiXtree.prototype.dataBind=function(e){var t=this;if(e.length>0)for(i in e){var l="",o="",a=e[i].disabled?' disabled="disabled" ':"";t._domStr+='<div class="layui-xtree-item">',e[i].children.length>0?null!=e[i].iconCls?(t._domStr+='<i class="layui-icon layui-xtree-icon" data-xtree="'+(t._isopen?"1":"0")+'">'+(t._isopen?t._iconOpen:t._iconClose)+"</i>",t._domStr+='<i class="'+e[i].iconCls+'" style="margin-right: 5px;font-size: 16px;vertical-align: middle;color: #b7b7b7"></i>'):t._domStr+='<i class="layui-icon layui-xtree-icon" data-xtree="'+(t._isopen?"1":"0")+'">'+(t._isopen?t._iconOpen:t._iconClose)+"</i>":(null!=e[i].iconCls?t._domStr+='<i class="'+e[i].iconCls+'" style="margin-right: 5px;font-size: 16px;vertical-align: middle;color: #b7b7b7"></i>':t._domStr+='<i class="layui-icon layui-xtree-icon-null">'+t._iconEnd+"</i>",l='data-xend="1"',o=e[i].checked?" checked ":"",a=e[i].disabled?' disabled="disabled" ':""),t._domStr+='<input type="checkbox" class="layui-xtree-checkbox" '+l+o+a+' value="'+e[i].id+'" title="'+e[i].name+'" lay-skin="primary" lay-filter="xtreeck'+t._containerid+'">',t.dataBind(e[i].children),t._domStr+="</div>"}},layuiXtree.prototype.Rendering=function(){var e=this;e._container.innerHTML=e._domStr,e._domStr="";for(var t=e.getByClassName("layui-xtree-checkbox"),i=0;i<t.length;i++)"1"==t[i].getAttribute("data-xend")&&t[i].checked&&e.ParentCheckboxChecked(t[i]);e._form.render("checkbox");for(var l=e.getByClassName("layui-xtree-item"),o=e.getByClassName("layui-xtree-icon"),a=e.getByClassName("layui-xtree-icon-null"),i=0;i<l.length;i++)l[i].parentNode==e._container?l[i].style.margin="5px 0 0 10px":(l[i].style.margin="5px 0 0 45px",e._isopen||(l[i].style.display="none"));for(var i=0;i<o.length;i++)o[i].style.position="relative",o[i].style.top="3px",o[i].style.margin="0 5px 0 0",o[i].style.fontSize="18px",o[i].style.color=e._isopen?e._iconOpenColor:e._iconCloseColor,o[i].style.cursor="pointer",o[i].onclick=function(){var t=this.parentNode.childNodes;if(1==this.getAttribute("data-xtree")){for(var i=0;i<t.length;i++)"layui-xtree-item"==t[i].getAttribute("class")&&(t[i].style.display="none");this.setAttribute("data-xtree","0"),this.innerHTML=e._iconClose,this.style.color=e._iconCloseColor}else{for(var i=0;i<t.length;i++)"layui-xtree-item"==t[i].getAttribute("class")&&(t[i].style.display="block");this.setAttribute("data-xtree","1"),this.innerHTML=e._iconOpen,this.style.color=e._iconOpenColor}};for(var i=0;i<a.length;i++)a[i].style.position="relative",a[i].style.top="3px",a[i].style.margin="0 5px 0 0",a[i].style.fontSize="18px",a[i].style.color=e._iconEndColor;e._form.on("checkbox(xtreeck"+e._containerid+")",function(t){for(var i=t.elem.parentNode.getElementsByClassName("layui-xtree-item"),l=0;l<i.length;l++)e.getChildByClassName(i[l],"layui-xtree-checkbox")[0].disabled||(e.getChildByClassName(i[l],"layui-xtree-checkbox")[0].checked=t.elem.checked,t.elem.checked?e.getChildByClassName(i[l],"layui-xtree-checkbox")[0].nextSibling.classList.add("layui-form-checked"):e.getChildByClassName(i[l],"layui-xtree-checkbox")[0].nextSibling.classList.remove("layui-form-checked"));e.ParendCheck(t.elem),e._click(t)});for(var n=e.getByClassName("layui-disabled"),i=0;i<n.length;i++)n[i].getElementsByTagName("span")[0].style.color="#B5B5B5";e._ckall&&e._form.on("checkbox(xtreeckall"+e._containerid+")",function(t){for(var i=t.elem.parentNode.parentNode.getElementsByClassName("layui-form-checkbox"),l=0;l<i.length;l++)i[l].getAttribute("class").indexOf("layui-checkbox-disbaled")==-1&&(t.elem.checked?i[l].classList.add("layui-form-checked"):i[l].classList.remove("layui-form-checked"),i[l].parentNode.getElementsByClassName("layui-xtree-checkbox")[0].checked=t.elem.checked);e._ckallSuccess()})},layuiXtree.prototype.render=function(e){var t=this;t.Loading(Object.assign(t._options,e))},layuiXtree.prototype.ParendCheck=function(e){var t=this,i=e.parentNode.parentNode;if("layui-xtree-item"==i.getAttribute("class")){for(var l=t.getChildByClassName(i,"layui-xtree-item"),o=0,a=0;a<l.length;a++)t.getChildByClassName(l[a],"layui-xtree-checkbox")[0].checked&&o++;o<=0?(t.getChildByClassName(i,"layui-xtree-checkbox")[0].checked=!1,t.getChildByClassName(i,"layui-xtree-checkbox")[0].nextSibling.classList.remove("layui-form-checked")):(t.getChildByClassName(i,"layui-xtree-checkbox")[0].checked=!0,t.getChildByClassName(i,"layui-xtree-checkbox")[0].nextSibling.classList.add("layui-form-checked")),this.ParendCheck(t.getChildByClassName(i,"layui-xtree-checkbox")[0])}},layuiXtree.prototype.ParentCheckboxChecked=function(e){var t=this;if("layui-xtree-item"==e.parentNode.parentNode.getAttribute("class")){var i=t.getChildByClassName(e.parentNode.parentNode,"layui-xtree-checkbox")[0];i.checked=!0,t.ParentCheckboxChecked(i)}},layuiXtree.prototype.GetChecked=function(){for(var e=this,t=new Array,i=0,l=e.getByClassName("layui-xtree-checkbox"),o=0;o<l.length;o++)l[o].checked&&(t[i]=l[o],i++);return t},layuiXtree.prototype.GetAllCheckBox=function(){for(var e=this,t=new Array,i=0,l=e.getByClassName("layui-xtree-checkbox"),o=0;o<l.length;o++)t[i]=l[o],i++;return t},layuiXtree.prototype.GetParent=function(e){for(var t=this,i=t.getByClassName("layui-xtree-checkbox"),l=0;l<i.length;l++)if(i[l].value==e)return i[l].parentNode.parentNode.getAttribute("id")==t._container.getAttribute("id")?null:t.getChildByClassName(i[l].parentNode.parentNode,"layui-xtree-checkbox")[0];return null},exports("xtree",layuiXtree)});