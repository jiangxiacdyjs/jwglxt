/** layuiAdmin.pro-v1.0.0-beta9 LPPL License By http://www.layui.com/admin/ */
 ;layui.extend({setter:"config",admin:"lib/admin",view:"lib/view",viewer:"lib/extend/viewer/viewer",treeselect:"../lib/extend/layui-treeselect",formSelects:"../lib/extend/formSelects-v3",xtree:"../lib/extend/layui-xtree",verfiy:"../lib/extend/layui-gVerify",macy:"../lib/extend/macy"}).define(["setter","admin"],function(e){var a=layui.setter,t=layui.element,i=layui.admin,n=i.tabsPage,l=layui.view,r=layui.$,s=function(){var e=layui.router(),r=e.path,o=i.correctRouter(e.path.join("/"));r.length||(r=[""]),""===r[r.length-1]&&(r[r.length-1]=a.entry);var d="#LAY_app_body",c="layadmin-layout-tabs",y=layui.$,h=y(window),p=function(e){s.haveInit&&y(".layui-layer").each(function(){var e=y(this),a=e.attr("times");e.hasClass("layui-layim")||layer.close(a)}),s.haveInit=!0,y(d).scrollTop(0),delete n.type};return"tab"===n.type&&("/"!==o||"/"===o&&i.tabsBody().html())?(i.tabsBodyChange(n.index),p(n.type)):(l().render(r.join("/")).then(function(l){var r,s=y("#LAY_app_tabsheader>li");s.each(function(e){var a=y(this),t=a.attr("lay-id");t===o&&(r=!0,n.index=e)}),a.pageTabs&&"/"!==o&&(r||(y(d).append('<div class="layadmin-tabsbody-item layui-show"></div>'),n.index=s.length,t.tabAdd(c,{title:"<span>"+(l.title||"新标签页")+"</span>",id:o,attr:e.href}))),this.container=i.tabsBody(n.index),a.pageTabs||this.container.scrollTop(0),t.tabChange(c,o),i.tabsBodyChange(n.index)}).done(function(){layui.use("common",layui.cache.callback.common),h.on("resize",layui.data.resize),i.tabsBody(n.index).on("scroll",function(){var e=y(this),a=y(".layui-laydate"),t=y(".layui-layer")[0];a[0]&&(a.each(function(){var e=y(this);e.hasClass("layui-laydate-static")||e.remove()}),e.find("input").blur()),t&&layer.closeAll("tips")}),u()}),void p())},o=function(e){var t,n=layui.router(),r=l(a.container),o=i.correctRouter(n.path.join("/"));if(layui.each(a.indPage,function(e,a){if(o===a)return t=!0}),layui.config({base:a.base+"controller/"}),t||"/user/login"===o)r.render(n.path.join("/")).done(function(){i.pageType="alone"});else{if(a.interceptor){var u=layui.data(a.tableName);if(!u[a.request.tokenName])return location.hash="/user/login/redirect="+encodeURIComponent(o);if(u[a.request.tokenName]&&"admin"!==u[a.request.tokenName])return location.hash="/template/tips/test"}"console"===i.pageType?s():r.render("layout").done(function(){s(),layui.element.render(),i.screen()<2&&i.sideFlexible(),i.pageType="console"})}},u=function(){var e=a.pageTabs;if(!e){var i=r("#LAY-system-side-menu");if(i.length){var n=r("#LAY-system-side-menu").find(".layui-this"),l=n.children("a").eq(0),s=l.text().replace(/\s/g,"");r("#show-router-path").children("a:not(:first),span").remove();if(l.parent("li").length){var o=r("<cite/>").text(s),u=r("<a/>"),d=u.append(o);r("#show-router-path").append(d)}else{for(var c=[s],y=l.parents("dl.layui-nav-child"),h=0;h<y.length;h++)c.push(y.eq(h).siblings("a").eq(0).text().replace(/\s/g,""));for(var p=c.length-1;p>-1;p--){if(0==p)var o=r("<cite/>").text(c[p]),u=r("<a/>"),v=u.append(o);else var v=r("<a/>").text(c[p]);r("#show-router-path").append(v)}}t.render("breadcrumb"),0===n.length&&r("#show-router-path").children("a:not(:first),span").remove()}}};layui.link(a.base+"style/admin.css?v="+(i.v+"-1"),function(){o()},"layuiAdmin"),layui.link(a.base+"lib/extend/viewer/viewer.css?v="+(i.v+"-1")),layui.link(a.base+"font-awesome-4.7.0/css/font-awesome.min.css?v="+(i.v+"-1")),layui.link(a.base+"style/base.css?v="+(i.v+"-1")),window.onhashchange=function(){o(),layui.event.call(this,a.MOD_NAME,"hash({*})",layui.router())},layui.each(a.extend,function(e,t){var i={};i[t]="{/}"+a.base+"lib/extend/"+t,layui.extend(i)}),e("index",{render:s,showRouter:u})});