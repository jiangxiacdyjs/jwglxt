<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="../Public/lib/html5shiv.js"></script>
    <script type="text/javascript" src="../Public/lib/respond.min.js"></script>

    <![endif]-->
    <link href="../Public/static/h-ui/css/H-ui.min.css" rel="stylesheet" type="text/css"/>
    <link href="../Public/static/h-ui.admin/css/H-ui.admin.css" rel="stylesheet" type="text/css"/>
    <link href="../Public/lib/Hui-iconfont/1.0.8/iconfont.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" type="text/css" href="../Public/static/h-ui.admin/skin/green/skin.css" id="skin"/>
    <!---------------------新增引入style.css-->
    <link rel="stylesheet" type="text/css" href="../Public/mySrc/css/style.css"/>
    <!--[if IE 6]>
    <script type="text/javascript" src="../Public/lib/DD_belatedPNG_0.0.8a-min.js"></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>学校每周食谱安排</title>
</head>

<body>
<div class="page-container">
    <div class="f-20 pd-20 text-c" style="border-bottom: 1px dashed #7C7C7C;padding-top: 0">
        <span class="Hui-iconfont mr-10">&#xe669;</span>配送公司编辑
        <span class="f-r c-333 f-16" id="date"></span>
    </div>
    <table id="table" class="table table-border table-bordered table-bg table-hover mt-20">
        <thead>
        <tr class="text-c" data-tabullet-map="id">
            <th width="50" data-tabullet-map="_index" data-tabullet-readonly="true">编号</th>
            <th data-tabullet-map="firmName">运输公司名称</th>
            <th data-tabullet-map="firmOwner">法人代表</th>
            <th data-tabullet-map="firmTel">联系方式</th>
            <th data-tabullet-map="mark">备注信息</th>
            <th width="50" data-tabullet-type="edit">编辑</th>
            <th width="50" data-tabullet-type="delete">删除</th>
        </tr>
        </thead>
    </table>
    <p class="text-c">
        <input class="btn btn-primary radius mt-30" type="submit" value="确认修改">
    </p>
</div>
<script type="text/javascript" src="../Public/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../Public/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="../Public/lib/jquery.tabullet/js/tabullet.js"></script>
<script type="text/javascript" src="../Public/static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="../Public/static/h-ui.admin/js/H-ui.admin.js"></script>
<script type="text/javascript" src="../Public/mySrc/js/common.js"></script>
<script>
    /*-------新增获取当前时间-------*/
    var d = new Date();
    var str = d.getFullYear() + "-" + ((d.getMonth() + 1) < 10 ? "0" : "") + (d.getMonth() + 1) + "-" + (d.getDate() < 10 ? "0" : "") + d.getDate();
    var $date = $("#date");
    $date.html(str);

    $(function () {
        var source = [{
            id: 1,
            firmName: '贵州恒泰商务贸易有限公司',
            firmOwner: "李春晖",
            firmTel: "13879387938",
            mark: "2017年7月4日入住贵州省营养餐系统"
        }, {
            id: 2,
            firmName: '贵州恒泰商务贸易有限公司',
            firmOwner: "李春晖",
            firmTel: "13879387938",
            mark: "2017年7月4日入住贵州省营养餐系统"
        }, {
            id: 3,
            firmName: '贵州恒泰商务贸易有限公司',
            firmOwner: "李春晖",
            firmTel: "13879387938",
            mark: "2017年7月4日入住贵州省营养餐系统"
        }, {
            id: 4,
            firmName: '贵州恒泰商务贸易有限公司',
            firmOwner: "李春晖",
            firmTel: "13879387938",
            mark: "2017年7月4日入住贵州省营养餐系统"
        }, {
            id: 5,
            firmName: '贵州恒泰商务贸易有限公司',
            firmOwner: "李春晖",
            firmTel: "13879387938",
            mark: "2017年7月4日入住贵州省营养餐系统"
        },];

        function resetTabullet() {
            $("#table").tabullet({
                data: source,
                action: function (mode, data) {
                    // console.dir(data);
                    if (mode === 'save') {
                        source.push(data);
                    }
                    if (mode === 'edit') {
                        for (var i = 0; i < source.length; i++) {
                            if (source[i].id == data.id) {
                                source[i] = data;
                            }
                        }
                    }
                    if (mode == 'delete') {
                        for (var i = 0; i < source.length; i++) {
                            if (source[i].id == data) {
                                source.splice(i, 1);
                                break;
                            }
                        }
                    }
                    resetTabullet();
                }
            });
        }

        resetTabullet();
    });
</script>
</body>

</html>
